@model InventoryUpdateVM

@{
    ViewBag.Title = "Home | Update";
    string min = DateTime.Today.AddDays(0).ToString("yyyy-MM-dd");

    // Status options for a dropdown (matching the validation in HomeController.cs)
    var statusOptions = new List<SelectListItem>
    {
        new SelectListItem { Value = "AVAILABLE", Text = "Available" },
        new SelectListItem { Value = "SOLD", Text = "Sold" },
        new SelectListItem { Value = "DISPOSED", Text = "Disposed" }
    };
    ViewBag.StatusList = new SelectList(statusOptions, "Value", "Text");
}

<form method="post" class="form">
    <div asp-validation-summary="ModelOnly"></div>

    @* Hidden field to carry the unique ID back to the POST method *@
    <input type="hidden" asp-for="Id" />

    @* Display the non-editable ID to the user *@
    <label asp-for="Id"></label>
    <input asp-for="Id" readonly>
    <span asp-validation-for="Id"></span>

    <label asp-for="ProductId">Product</label>
    <select asp-for="ProductId" asp-items="ViewBag.ProductList" class="form-control" id="ProductSearch" style="text-transform: uppercase">
        <option value="">- Select Product -</option>
    </select>
    <span asp-validation-for="ProductId" class="text-danger"></span>

    <label asp-for="ExpiryDate"></label>
    <div>
        <input asp-for="ExpiryDate" autofocus min="@min">
    </div>
    <span asp-validation-for="ExpiryDate"></span>

    <label asp-for="StaffId">Staff ID</label>
    <input asp-for="StaffId">
    <span asp-validation-for="StaffId"></span>

    <label asp-for="CheckoutId">Checkout ID</label>
    <input asp-for="CheckoutId">
    <span asp-validation-for="CheckoutId"></span>

    <label asp-for="Status"></label>
    <select asp-for="Status" asp-items="ViewBag.StatusList" class="form-control">
        <option value="">- Select Status -</option>
    </select>
    <span asp-validation-for="Status" class="text-danger"></span>

    <section>
        <button>Save Changes</button>
        <button type="reset">Reset</button>
    </section>
</form>

@section foot {
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

    <script>
        $(document).ready(function() {
            $('#ProductSearch').select2({
                placeholder: "- Type to Search Product -",
                allowClear: true,
                width: '100%'
            });
            $('#StaffSearch').select2({
                placeholder: "- Type to Search Staff -",
                allowClear: true,
                width: '100%'
            });
        });
    </script>
}