@{
	ViewBag.Title = "Index";
}
@model IEnumerable<GroceryManagement.Models.User>


<h2>Index</h2>
<p>@Model.Count() record(s)</p>
<table class="table">
	<tr>
		<th>User Id</th>
		<th>Name</th>
		<th>Email</th>
		@* <th>Password</th> *@
		<th>PhoneNum</th>
		<th>Role</th>
		<th>Salary</th>
		<th>AuthorizationLvl</th>
		<th>Manager ID</th>
		<th>Photo</th>
		<th>Actions</th>
	</tr>
	@foreach (var user in Model)
	{
		<tr>
			<td>@user.Id</td>
			<td>@user.Name</td>
			<td>@user.Email</td>
			@* <td>@user.Password</td> *@
			<td>@user.PhoneNum</td>
			<td>@user.Role</td>
			@if(user is Staff staff)
			{
				<td>@staff.Salary</td>
				<td>@staff.AuthorizationLvl</td>
				<td>@staff.ManagerId</td>
			}
			else
			{
				<td>-</td>
				<td>-</td>
				<td>-</td>
				<td>
					<svg width="50" height="50" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
						<path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
						<circle cx="12" cy="7" r="4"></circle>
					</svg>
				</td>

			}
			@if (user is Staff staffMember)
			{
				<td>
					@if (!string.IsNullOrEmpty(staffMember.PhotoURL))
					{
						<img src="/photos/@staffMember.PhotoURL" width="50" height="50" style="border-radius:50%; object-fit:cover;" />
					}
					else
					{
						<span class="text-muted">No Photo</span>
					}
				</td>
			}
			<td>
				<button data-get="/User/Detail/@user.Id">Detail</button>
				<button data-get="/User/Update/@user.Id">Update</button>
				<button data-post="/User/Delete/@user.Id">Delete</button>
			</td>
		</tr>
	}
